post:
  summary: 导入/更新商品接口
  description: 导入商品至微信（仅支持导入小程序落地页的商品）。每次调用支持批量导入不超过1000条的商品信息。每分钟单个商户全局调用次数不得超过200次。每天调用次数不得超过100万次。每次请求包大小不超过2M。[官方文档](https://mp.weixin.qq.com/cgi-bin/announce?action=getannouncement&key=11533749572M9ODP&version=1&lang=zh_CN&platform=2)
  security:
    - accessToken: []
  tags:
    - 返佣商品
  parameters:
    - in: body
      name: body
      schema:
        type: object
        properties:
          product:
            type: array
            items:
              type: object
              properties:
                pid:
                  type: string
                  title: 商品id
                  description: 商品全局唯一标识，只能用字母、数字、部分字符及其组合表示，不超过32个字符。本id代表商品信息聚合的单位（一般称作spu），下面可以有更细的sku（若商户只有sku体系，请指定某个sku的id作为商品pid）
                partial_update:
                  type: integer
                  format: int32
                  title: 是否增量更新
                  description: 不填默认为1。填0代表全量更新，填1代表增量更新（即更新某些字段）
                  enum: [1, 0]
                  default: 1
                image_info:
                  type: object
                  title: 商品图片
                  description: 用于商品展示，至少上传一张，请确保首图清晰完整，宽高比要求1:1，大小不超过5M
                  properties:
                    main_image_list:
                      type: array
                      items:
                        type: object
                        properties:
                          url:
                            type: string
                category_info:
                  type: object
                  title: 商户原始类目
                  description: 多级类目多个category_item分隔（参加示例），写在后的为下一级，每级不超过30个汉字，最多5级。填写商户原本的类目树即可
                  properties:
                    category_item:
                      type: array
                      items:
                        type: object
                        properties:
                          category_name:
                            type: string
                official_category_info:
                  type: object
                  title: 微信指定类目
                  description: 只有一级，例如图书商品需要填写一级类目”图书”，目前开放一级类目有 **图书，女装，男装，美妆个护，母婴，食品生鲜，数码家电，珠宝配饰，鞋靴箱包，运动户外，家居百货，汽车用品** ，请准确填写商品所属类目（不属于上述类目的商品请勿导入）
                  properties:
                    category_item:
                      type: array
                      items:
                        type: object
                        properties:
                          category_name:
                            type: string
                link_info:
                  type: object
                  properties:
                    link_type:
                      type: string
                      title: 商品详情链接跳转类型
                      description: 必须为小程序类型，请填wxa
                      default: wxa
                    wxa_appid:
                      type: string
                      title: 小程序appid
                      description: 推广商品所属的小程序appid
                    url:
                      type: string
                      title: 商品详情的小程序path路径
                      description: 填写该商品跳转的小程序页面路径
                title:
                  type: string
                  title: 商品标题
                  description: 商品名称，建议11汉字以内，最长不超过30个汉字（大小超出900字节，后台将截断超出部分后存储）
                sub_title:
                  type: string
                  title: 商品副标题
                  description: 商品特性、简短描述等，建议最长不超过30个汉字（大小超出900字节，后台将截断超出部分后存储）
                brand:
                  type: string
                  title: 品牌名称
                  description: 商品所属品牌
                shop_info:
                  type: object
                  properties:
                    source:
                      type: integer
                      format: int32
                      title: 商品来源
                      description: 1代表平台自营，2代表非平台自营
                      enum: [1, 2]
                      default: 1
                desc:
                  type: string
                  title: 商品描述
                  description: 商品的详情描述，最长不超过300个汉字（大小超出900字节，后台将截断超出部分后存储）
                price_info:
                  type: object
                  description: 价格信息
                  properties:
                    min_price:
                      type: number
                      format: float
                      title: 现价最低价
                      description: 若只有一个价格，最低价=最高价，单位元，保留小数点后两位（价格有变更时，务必实时更新至微信）
                    max_price:
                      type: number
                      format: float
                      title: 现价最高价
                      description: 若只有一个价格，最低价=最高价，单位元，保留小数点后两位（价格有变更时，务必实时更新至微信）
                    min_ori_price:
                      type: number
                      format: float
                      title: 原价最低价
                      description: 若只有一个价格，最低价=最高价，单位元，保留小数点后两位（价格有变更时，务必实时更新至微信）
                    max_ori_price:
                      type: number
                      format: float
                      title: 原价最高价
                      description: 若只有一个价格，最低价=最高价，单位元，保留小数点后两位（价格有变更时，务必实时更新至微信）
                sale_info:
                  type: object
                  description: 售卖信息
                  properties:
                    sale_status:
                      type: string
                      title: 商品上下架状态
                      description: 上架“on”，下架“off”，该商品总的上下架状态（状态有变更时，务必实时更新至微信）
                      enum: [on, off]
                    stock:
                      type: integer
                      format: int32
                      title: 库存
                      description: 该商品的总库存（sku库存累加），整数，不可为负。商品若需在选品端被发现，则该字段必填，该字段为空或者为0时，则商品无法在选品端出现（库存有变更时，务必实时更新至微信）
                sku_info:
                  type: object
                  properties:
                    sku_item:
                      type: array
                      items:
                        type: object
                        properties:
                          sku_id:
                            type: string
                            title: 商品最小单元的id
                            description: 商品最小单元（如红色40码鞋子）的标识，全局唯一，只能用字母、数字、部分字符及其组合表示，不超过32个字符。
                          barcode_type:
                            type: string
                            title: 条码类型
                            description: 标品必填，非标品为空。枚举值：ean13、ean8
                            enum: [ean13, ean8]
                          barcode:
                            type: integer
                            format: int64
                            title: 商品条码
                            description: 标品必填，非标品为空
                          shop_info:
                            type: object
                            properties:
                              source:
                                type: integer
                                format: int32
                                title: 商品来源
                                description: 1代表平台自营，2代表非平台自营
                                enum: [1, 2]
                                default: 1
                          image_info:
                            type: object
                            title: 商品图片
                            description: sku_id非空时，必填 sku相应的图片，可以多张，宽高比要求1:1，大小不超过5M
                            properties:
                              main_image_list:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                          link_url:
                            type: string
                            title: 商品详情的小程序path路径
                            description: sku_id非空时，必填 填写该商品sku跳转的小程序页面路径
                          price_info:
                            type: object
                            description: 价格信息
                            properties:
                              min_price:
                                type: number
                                format: float
                                title: 现价最低价
                                description: sku_id非空时，必填 若只有一个价格，最低价=最高价，单位元，保留小数点后两位（价格有变更时，务必实时更新至微信）
                              max_price:
                                type: number
                                format: float
                                title: 现价最高价
                                description: sku_id非空时，必填 若只有一个价格，最低价=最高价，单位元，保留小数点后两位（价格有变更时，务必实时更新至微信）
                              min_ori_price:
                                type: number
                                format: float
                                title: 原价最低价
                                description: 若只有一个价格，最低价=最高价，单位元，保留小数点后两位（价格有变更时，务必实时更新至微信）
                              max_ori_price:
                                type: number
                                format: float
                                title: 原价最高价
                                description: 若只有一个价格，最低价=最高价，单位元，保留小数点后两位（价格有变更时，务必实时更新至微信）
                          sale_info:
                            type: object
                            description: 售卖信息
                            properties:
                              sale_status:
                                type: string
                                title: 商品上下架状态
                                description: sku_id非空时，必填 上架“on”，下架“off”，该商品总的上下架状态（状态有变更时，务必实时更新至微信）
                                enum: [on, off]
                              stock:
                                type: integer
                                format: int32
                                title: 库存
                                description: 该商品的总库存（sku库存累加），整数，不可为负。商品若需在选品端被发现，则该字段必填，该字段为空或者为0时，则商品无法在选品端出现（库存有变更时，务必实时更新至微信）
                custom_info:
                  type: object
                  properties:
                    custom_list:
                      type: array
                      items:
                        type: object
                        properties:
                          key:
                            type: string
                            title: 类目为图书时，必填
                            description: 图书的一段简短介绍或者推荐语，用于商品展示，建议30汉字以内（大小超出900字节，后台将截断超出部分后存储）
                            enum: [book_desc, author, publisher]
                          value:
                            type: string
        required:
          - product
        example:
          product:
            - pid: pid001
              image_info:
                main_image_list:
                  - url: 'http://www.google.com/a.jpg'
                  - url: 'http://www.google.com/b.jpg'
              category_info:
                category_item:
                  - category_name: 图书
                  - category_name: 少儿图书
              official_category_info:
                category_item:
                  - category_name: 图书
              link_info:
                url: pages/index/index
                wxa_appid: wxa0x01adx3423566
                link_type: wxa
              title: test title
              sub_title: test sub_title
              brand: test brand
              shop_info:
                source: 2
              desc: test desc
              price_info:
                min_price: 250
                max_price: 250.22
                min_ori_price: 300.1
                max_ori_price: 320.15
              sale_info:
                sale_status: 'on'
                stock: 1000
              custom_info:
                custom_list:
                  - key: book_desc
                    value: “熊猫先生”通过4个富有节律性、带有因果关系、幽默风趣，又有正反对比的故事，让小朋友明白礼仪的重要性。
                  - key: author
                    value: 史蒂夫•安东尼
                  - key: publisher
                    value: 中信出版社
              sku_info:
                sku_item:
                  - sku_id: sku001
                    barcode_type: ean13
                    barcode: 2018032105140
                    image_info:
                      main_image_list:
                        - url: 'http://www.google.com/c.jpg'
                        - url: 'http://www.google.com/d.jpg'
                    link_url: pages/index/index?a=b
                    price_info:
                      min_price: 250
                      max_price: 250.22
                      min_ori_price: 300.1
                      max_ori_price: 320.15
                    sale_info:
                      sale_status: 'on'
                      stock: 500
                    shop_info:
                      source: 2
                  - sku_id: sku002
                    barcode_type: ean13
                    barcode: 2018032105140
                    image_info:
                      main_image_list:
                        - url: 'http://www.google.com/c.jpg'
                        - url: 'http://www.google.com/d.jpg'
                    link_url: pages/index/index?a=b
                    price_info:
                      min_price: 250
                      max_price: 250.22
                      min_ori_price: 300.1
                      max_ori_price: 320.15
                    sale_info:
                      sale_status: 'on'
                      stock: 500
                    shop_info:
                      source: 2
              partial_update: 1
            - pid: pid002
              image_info:
                main_image_list:
                  - url: 'http://www.google.com/a.jpg'
                  - url: 'http://www.google.com/b.jpg'
              category_info:
                category_item:
                  - category_name: 女装
                  - category_name: 连衣裙
              official_category_info:
                category_item:
                  - category_name: 女装
              link_info:
                url: pages/index/index
                wxa_appid: wxa0x01adx3423566
                link_type: wxa
              title: test title
              sub_title: test sub_title
              brand: test brand
              shop_info:
                source: 2
              desc: test desc
              price_info:
                min_price: 250
                max_price: 250.22
                min_ori_price: 300.1
                max_ori_price: 320.15
              sale_info:
                sale_status: 'on'
                stock: 1000
              sku_info:
                sku_item:
                  - sku_id: sku001
                    barcode_type: ean13
                    barcode: 2018032105140
                    image_info:
                      main_image_list:
                        - url: 'http://www.google.com/c.jpg'
                        - url: 'http://www.google.com/d.jpg'
                    link_url: pages/index/index?a=b
                    price_info:
                      min_price: 250
                      max_price: 250.22
                      min_ori_price: 300.1
                      max_ori_price: 320.15
                    sale_info:
                      sale_status: 'on'
                      stock: 500
                    shop_info:
                      source: 2
                  - sku_id: sku002
                    barcode_type: ean13
                    barcode: 2018032105140
                    image_info:
                      main_image_list:
                        - url: 'http://www.google.com/c.jpg'
                        - url: 'http://www.google.com/d.jpg'
                    link_url: pages/index/index?a=b
                    price_info:
                      min_price: 250
                      max_price: 250.22
                      min_ori_price: 300.1
                      max_ori_price: 320.15
                    sale_info:
                      sale_status: 'on'
                      stock: 500
                    shop_info:
                      source: 2
              partial_update: 1
  responses:
    '200':
      description: ''
      schema:
        allOf:
          - $ref: '#/definitions/base.ResponseBo'
          - type: object
            description: 用于获取此次导入的详细结果
            properties:
              status_ticket:
                type: string
        example:
          errcode: 0
          errmsg: ok
          status_ticket: 115141102647330200
